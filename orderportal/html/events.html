{# Events items edit page. #}

{% extends "base.html" %}

{% block head_title %}Events{% end %}
{% block body_title %}Events{% end %}

{% block content %}
<div class="row">
  <div class="col-sm-10 col-sm-offset-1">

    <table class="table table-striped">
      <tr>
	<th>Date</th>
	<th>Title, text</th>
	<th>Modified</th>
      </tr>

      {% for event in events %}
      <tr>
	<td>{{ event['date'] }}</td>
	<td>
	  <strong>{{ event['title'] }}</strong>
	  <div>
	    {% module Markdown(event.get('text')) %}
	  </div>
	</td>
	<td class="localtime">{{ event['modified'] }}</td>
	{% if is_admin %}
	<td>
	  <form action="{{ reverse_url('event', event['_id']) }}"
		role="form" method="POST">
	    {% module xsrf_form_html() %}
	    <input type="hidden" name="_http_method" value="delete">
	    <div class="form-group">
	      <label class="control-label"></label>
	      <button type="submit"
		      class="btn btn-success glyphicon glyphicon-remove"
		      onclick="return confirm('Cannot be undone! Really delete?');">
		Delete
	      </button>
	    </div>
	  </form>
	</td>
	{% end %} {# if is_admin #}
      </tr>
      {% end %}
    </table>

    {% if is_admin %}
    <div class="panel panel-success">
      <div class="panel-heading">Add an events item</div>
      <div class="panel-body">
	<form action="{{ reverse_url('events') }}"
	      role="form" method="POST">
	  {% module xsrf_form_html() %}

	  <div class="form-group has-feedback">
	    <div class="row">
	      <div class="col-xs-4">
		<label class="control-label" for="date">Date</label>
		<input type="text" class="form-control"
		       name="date" id="date">
		<span style="color:red; margin-right: 1em;"
		      class="glyphicon glyphicon-star form-control-feedback"
		      aria-hidden="true"></span>
	      </div>
	    </div>
	    <p class="text-muted">
	      Date for the event; start date if multi-day event. Use
	      ISO format, <i>i.e.</i> yyyy-mm-dd, <i>e.g.</i> 2015-06-15.
	    </p>
	  </div>

	  <div class="form-group has-feedback">
	    <div class="row">
	      <div class="col-xs-8">
		<label class="control-label" for="title">Title</label>
		<input type="text" class="form-control" name="title" id="title">
		<span style="color:red; margin-right: 1em;"
		      class="glyphicon glyphicon-star form-control-feedback"
		      aria-hidden="true"></span>
	      </div>
	    </div>
	    <p class="text-muted">
	      Title for the event.
	    </p>
	  </div>

	  <div class="form-group">
	    <div class="row">
	      <div class="col-xs-10">
		<label class="control-label" for="text">Text</label>
		<textarea class="form-control" rows="5"
			  name="text" id="text"></textarea>
	      </div>
	    </div>
	    <p class="text-muted">
	      The text is specified in
	      <a href="http://daringfireball.net/projects/markdown/">
		Markdown
	      </a>
	      format.
	    </p>
	  </div>

	  <div class="form-group">
	    <label class="control-label"></label>
	    <button type="submit"
		    class="btn btn-success glyphicon glyphicon-save">
	      Save
	    </button>
	  </div>
	</form>
      </div>
    </div>
{% end %} {# if is_admin #}


  </div>
  <div class="col-sm-1">
  </div>
</div>
{% end %} {# block content #}
