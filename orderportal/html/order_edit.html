{# Order edit page. #}

{% extends "base.html" %}

{% block head_title %}
Edit order
'{{ order.get('title') or order['_id'] }}'
{% end %}

{% block body_title %}
Edit order
'{{ order.get('title') or order['_id'] }}'
{% end %}

{% block main_content %}
<form action="{{ reverse_url('order_edit', order['_id']) }}"
      role="form" method='POST'>
  {% module xsrf_form_html() %}

  <div class="form-group">
    <div class="row">
      <div class="col-xs-8">
	<label class="control-label" for="__title__">Title</label>
	<input type="text" class="form-control"
	       name="__title__" id="__title__"
	       value="{{ order.get('title') or '' }}">
      </div>
    </div>
    <p class="text-muted">
	Brief, descriptive title for the order. It is not required to
	be unique, but it is a good idea to make it so anyway.
    </p>
  </div>

  {% for field in fields %}

    {% if field['type'] == 'group' %}
    <div class="row">
      <div class="col-xs-8">
	<h3>{{ field.get('label') or field['identifier'].capitalize() }}</h3>
      </div>
    </div>

    {% else %}
    <div class="form-group">
      <div class="row">
	<div class="col-xs-8">
	  <label class="control-label" for="{{ field['identifier'] }}">
	    {{ field.get('label') or field['identifier'].capitalize() }}
	  </label>
	  <input type="text" class="form-control"
		 name="{{ field['identifier'] }}" id="{{ field['identifier'] }}"
		 value="{{ order['fields'][field['identifier']] or '' }}">
	</div>
      </div>
      <p class="text-muted">
	{{ field.get('description') or '' }}
      </p>
    </div>
    {% end %}

  {% end %} {# for field in fields #}

  <div class="form-group">
    <label class="control-label"></label>
    <button type="submit"
	    class="btn btn-primary glyphicon glyphicon-save">
      Save
    </button>
  </div>

</form>

<br>
<form action="{{ reverse_url('order', order['_id']) }}"
      role="form" method="GET">
  <div class="form-group">
    <label class="control-label"></label>
    <button type="submit"
	    class="btn btn-default glyphicon glyphicon-remove">
      Cancel
    </button>
  </div>
</form>

{% end %} {# block main_content #}
