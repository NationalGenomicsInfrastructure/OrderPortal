# OrderPortal order state definitions

states:
  - id: PREPARATION
    description: The order has been created and may have been edited.

  - id: SUBMITTED
    description: The order has been submitted by the user
                 for consideration by the facility.

  - id: REVIEW
    description: The order is under review by the facility.

  - id: ACCEPTED
    description: The order has been checked and accepted by the facility.

  - id: REJECTED
    description: The order has been rejected by the facility.

  - id: PENDING 
    description: The facility is awaiting further input from the user.

  - id: QUEUED
    description: The facility has placed the order in its work queue.

  - id: WORKING
    description: The facility is working on the order, in the lab
                 or in data analysis.

  - id: WAITING
    description: Work has paused, for whatever reason.

  - id: CANCELLED
    description: The work on the project has been
                 permanently stopped by the user.

  - id: ABORTED
    description: The work on the project has been
                 permanently stopped by the facility.

  - id: FINISHED
    description: The work on the project has been finalized.

  - id: DELIVERED
    description: The results of the project have been delivered to the user.

  - id: INVOICED
    description: The user has been invoiced for the project.

  - id: CLOSED
    description: All work and other steps for the order have been done.

  - id: ARCHIVED
    description: The order and its data have been archived
                 and cannot be changed.

transitions:
  - source: null
    target: PREPARATION
    permission: user

  - source: PREPARATION
    target: null
    permission: user

  - source: PREPARATION
    target: SUBMITTED
    permission: user
    require: valid

  - source: SUBMITTED
    target: [REVIEW, ACCEPTED, REJECTED, PENDING]
    permission: staff

  - source: REVIEW
    target: [ACCEPTED, REJECTED, PENDING]
    permission: staff

  - source: ACCEPTED
    target: [PENDING, QUEUED, WORKING, WAITING]
    permission: staff

  - source: REJECTED
    target: [PREPARATION, null]
    permission: user

  - source: PENDING
    target: [QUEUED, WORKING, WAITING]
    permission: staff

  - source: QUEUED
    target: [WORKING, WAITING]
    permission: staff

  - source: WORKING
    target: [WAITING, ABORTED, FINISHED]
    permission: staff

  - source: WAITING
    target: [WORKING, ABORTED, FINISHED]
    permission: staff

  - source: FINISHED
    target: DELIVERED
    permission: staff
